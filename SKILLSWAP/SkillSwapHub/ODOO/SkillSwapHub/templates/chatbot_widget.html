<!-- Chatbot Widget (Self-contained, top-right, all pages) -->
<div id="chatbot-widget" style="position:fixed;top:20px;right:20px;z-index:9999;max-width:400px;">
    <button id="chatbot-toggle" class="btn btn-primary" style="border-radius:50%;width:48px;height:48px;box-shadow:0 2px 8px rgba(0,0,0,0.2);">
        <i class="fas fa-robot"></i>
    </button>
    <div id="chatbot-window" style="display:none;width:400px;background:#fff;border-radius:16px;box-shadow:0 4px 24px rgba(0,0,0,0.18);margin-top:12px;padding:0;overflow:hidden;">
        <div class="chatbot-header" style="background:#4f46e5;color:#fff;padding:1rem;font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:0.5em;">
            <i class="fas fa-robot"></i> Skill Swap Chatbot
        </div>
        <div class="chatbot-messages" id="chatbot-messages" style="height:320px;overflow-y:auto;padding:1rem;background:#f3f4f6;"></div>
        <form class="chatbot-input" id="chatbot-form" autocomplete="off" style="display:flex;border-top:1px solid #e5e7eb;">
            <input type="text" id="chatbot-input" placeholder="Type your question..." required style="flex:1;border:none;padding:0.75rem;font-size:1rem;outline:none;" />
            <button type="submit" style="border:none;background:#4f46e5;color:#fff;padding:0 1.5rem;font-size:1.1rem;cursor:pointer;"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>
</div>
<script>
    const toggleBtn = document.getElementById('chatbot-toggle');
    const chatWindow = document.getElementById('chatbot-window');
    const messages = document.getElementById('chatbot-messages');
    const form = document.getElementById('chatbot-form');
    const input = document.getElementById('chatbot-input');
    // Show welcome message
    messages.innerHTML = "<div class='message bot'><div class='bubble' style='display:inline-block;padding:0.6em 1em;border-radius:16px;background:#e0e7ff;color:#3730a3;max-width:80%;'>Hi! I am your Skill Swap assistant. Ask me anything about the platform, skills, or learning resources!</div></div>";
    toggleBtn.addEventListener('click', function() {
        chatWindow.style.display = chatWindow.style.display === 'none' ? 'block' : 'none';
    });
    function botReply(userMsg) {
        userMsg = userMsg.toLowerCase();
        if(userMsg.includes('learn')) return 'You can use the Learn section to find resources for any skill!';
        if(userMsg.includes('swap')) return 'Skill Swap lets you exchange skills with others. Send or accept a swap request to get started!';
        if(userMsg.includes('chatbot')) return 'I am here to help you with anything about Skill Swap.';
        if(userMsg.includes('profile')) return 'You can edit your profile from the dashboard.';
        if(userMsg.includes('admin')) return 'Admins can manage users and skills from the admin dashboard.';
        if(userMsg.includes('feedback')) return 'After completing a swap, you can leave feedback for your partner.';
        if(userMsg.includes('login')) return 'Click the Login button in the top right to sign in.';
        if(userMsg.includes('register')) return 'Click Register to create a new account.';
        if(userMsg.includes('forgot')) return 'Use the Forgot Password link on the login page to reset your password.';
        if(userMsg.includes('skills')) return 'Browse or search for skills on the Browse Users page.';
        if(userMsg.includes('help')) return 'How can I help you? You can ask about skills, swaps, learning, or anything else!';
        return 'Sorry, I am a demo bot. Please ask about Skill Swap features, skills, or learning!';
    }
    form.onsubmit = function(e) {
        e.preventDefault();
        const userMsg = input.value.trim();
        if(!userMsg) return;
        messages.innerHTML += `<div class='message user'><div class='bubble' style='display:inline-block;padding:0.6em 1em;border-radius:16px;background:#4f46e5;color:#fff;max-width:80%;'>${userMsg}</div></div>`;
        input.value = '';
        setTimeout(() => {
            const reply = botReply(userMsg);
            messages.innerHTML += `<div class='message bot'><div class='bubble' style='display:inline-block;padding:0.6em 1em;border-radius:16px;background:#e0e7ff;color:#3730a3;max-width:80%;'>${reply}</div></div>`;
            messages.scrollTop = messages.scrollHeight;
        }, 600);
        messages.scrollTop = messages.scrollHeight;
    };
</script>
